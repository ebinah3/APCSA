package act6;

import java.util.Scanner;
import java.util.ArrayList;

public class Class6 {
	private String name;
	private ArrayList<Student6> studentList;
	public Class6()
	{
		name="";
		studentList=new ArrayList<Student6>();
	}
	
	public Class6(String nam, int stuCount)
	{
		this();
		name = nam;
	}
	
	public Class6(Scanner s){
		this(s.nextLine(), Integer.parseInt(s.nextLine()));
		for(int i =0; i<studentList.size(); i++){
			addStudent(i, new Student6(s.nextLine(), s.nextLine()));
		}
	}
	
	public void addStudent(int stuNum, Student6 s)
	{
		studentList.add(s);
	}
	
	public String getClassName()
	{
	   return name;	
	}
	
	public double getClassAverage()
	{
		double classAverage= 0;
		for(Student6 s: studentList){
			classAverage+= s.getAverage();
		}
		classAverage = classAverage/(double)studentList.size();
		return classAverage;
	}
	
	public double getStudentAverage(int stuNum)
	{
		return studentList.get(stuNum).getAverage();
	}

	public double getStudentAverage(String stuName)
	{
		for(Student6 s: studentList){
			if(stuName.equals(s.getName()))
				return s.getAverage();
		}
		return 0.0;
	}
	
	public String getStudentName(int stuNum)
	{
		return studentList.get(stuNum).getName();
	}

	public String getStudentWithHighestAverage()
	{
		sort();
		return getStudentName(studentList.size()-1);

	}

	public String getStudentWithLowestAverage()
	{
		sort();
		return getStudentName(0);
	}
	
	public String getFailureList(double failingGrade)
	{
		String output="";
		for(int i = 0; i<studentList.size(); i++){
			if(getStudentAverage(i) < failingGrade){
				output += getStudentName(i) + " ";
			}				
		}
		return output;
	}
	public void sort(){
		ArrayList<Student6> g = new ArrayList<Student6>();
		Student6 index = new Student6();
		ArrayList<Student6> indexlist = new ArrayList<Student6>();
		double min = Double.MAX_VALUE;
		while (true){
			min = Double.MAX_VALUE;
			for (Student6 s: studentList){
				if (s.getAverage()< min){
					if (check(indexlist, s) == false){
						min = s.getAverage();
						index = s;
					}
					
				}
			}

				//indexlist[counter] = index;
			String ss = index + "";
			for(int i = 0; i<ss.length(); i++){
				if(ss.charAt(i) == '='){
					ss = index.getNumGrades() + " " + ss.substring(i);
				}
			}
			System.out.println(ss);
			indexlist.add(new Student6(index.getName(), ss));
			//g[counter] = studentList[index-1];
			g.add(new Student6(index.getName(), ss));
			if (g.size() == studentList.size()) 
				break;
			//}
			
		}
		studentList=g;
	}
	public boolean check(ArrayList<Integer> d, int c){
		for (int i: d){
			if (i == c){
				return true;
			}
		}
		return false;
	}
	public boolean check(ArrayList<Student6> d, Student6 c){
		for (Student6 i: d){
			if (i == c){
				return true;
			}
		}
		return false;
	}
	public String toString()
	{
		sort();
		//sorts();
		String output=""+getClassName();
		for(Student6 s: studentList){
			if(s.getAverage()%0.01 >= 0.005)
				output += "\n" + s + "\t" + (Math.ceil(s.getAverage()*100)/100);
			else
				output += "\n" + s + "\t" + (Math.floor(s.getAverage()*100)/100);
		}



		return output;
	}  	
}
